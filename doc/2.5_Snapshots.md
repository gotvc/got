# Snapshots

Snapshots are the unit of version control in Got.
They associate metadata with a Filesystem.
They are immutable, and are defined by their hash, any change to a Snapshot is definitionally another snapshot.

Snapshots contain the following information:
- Who              hash of a public key
- What             [a GotFS filesystem](./2.6_Filesystems.md)
- When             a [TAI64N](https://cr.yp.to/libtai/tai64.html timestamp and a critical distance monotonic counter
- After What       N previous snapshots by hash
- Extra            Snapshots have arbitrary JSON metadata

## DAG
Snapshots form a directed acyclic graph (DAG).
The initial snapshot is a sink node, containing no references to other Snapshots.
From then on, everytime a set of changes is committed into a Snapshot, the Snapshots will contain at least one reference to a parent Snapshot.
This continues in a chain.
If two branches fork off from the same Snapshot, accumulate more independent Snapshots, then merge back together, they have to be reconciled.
To record the fact that a reconcilation happened, the resulting Snapshot will have more than one parent.
This allows for both histories to be captured.

## Ancestry
The set of all nodes which can be reached from a Snapshot is called its Ancestry.
This is sometimes called the *transitive closure* of a vertex in a graph, and in that case the Snapshot itself is included in the set.
If a Snapshot has another Snapshot in it's ancestry, that means it knows how to transitition from that Snapshot to itself.

# Snapshots

A Snapshot is a Filesystem, plus some additional metadata, including:
- Who          the hash of a public key
- What         [a GotFS filesystem](./2.6_Filesystems.md)
- When         a [TAI64N](https://cr.yp.to/libtai/tai64.html timestamp and a critical distance monotonic counter
- After What   N previous snapshots by hash
- Extra        Snapshots have arbitrary JSON metadata

## DAG
Snapshots form a directed acyclic graph.
The initial snapshot is a sink node.
From then on, everytime a set of changes is committed into a Snapshot, the Snapshots will contain at least one reference to a parent.
This continues in a chain.
If two branches fork off from the same Snapshot, accumulate more independent Snapshots, then merge back together, they have to be reconciled.
To record the fact that a reconcilation happened, the resulting Snapshot will have more than one parent.
This allows for both histories to be captured.

## Ancestry
The set of all nodes which can be reached from a Snapshot is called it's Ancestry.
This is sometimes called the transitive closure of a vertex in a graph.
If a Snapshot has another Snapshot in it's ancestry, that means it knows how to transitition from that Snapshot to itself.
